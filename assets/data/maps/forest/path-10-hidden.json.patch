[{	
		"type": "ENTER",
		"index": ["entities"]
	},{
		"type": "ADD_ARRAY_ELEMENT",
		"content":
		{
			"type": "Prop",
			"x": 435,
			"y": 148,
			"level": 1,
			"settings": {
				"size": {
					"x": 16,
					"y": 16
				},
				"propType": {
					"name": "groundProjector",
					"sheet": "dungeon-revisits"
				},
				"propAnim": "",
				"spawnCondition": "plot.line >= 48000",
				"hideCondition": ""
			}
		}
	},{
		"type": "ADD_ARRAY_ELEMENT",
		"content":
		{
			"type": "Prop",
			"x": 439,
			"y": 155,
			"level": {
				"level": 1,
				"offset": 16
			},
			"settings": {
				"size": {
					"x": 16,
					"y": 16
				},
				"propType": {
					"sheet": "dungeon-revisits",
					"name": "signTall"
				},
				"propAnim": "default",
				"spawnCondition": "plot.line >= 48000",
				"interact": {
					"icon": "INFO",
					"hoverText": {
						"en_US": "Dungeon Revisit:\n\\c[3]Vermillion Tower"
					},
					"event": [{
							"type": "CHANGE_VAR_BOOL",
							"varName": "tmp.dungeonReplay",
							"changeType": "set",
							"value": true
						},{
							"type": "CHANGE_VAR_BOOL",
							"varName": "tmp.dungeonReplayElement",
							"changeType": "set",
							"value": false
						},{
							"type": "CHANGE_VAR_BOOL",
							"varName": "tmp.dungeonReplayRhombus",
							"changeType": "set",
							"value": false
						}
					]
				},
				"hideCondition": ""
			}
		}
	},{
		"type": "ADD_ARRAY_ELEMENT",
		"content":
		{
			"type": "TeleportField",
			"x": 487,
			"y": 200,
			"level": 1,
			"settings": {
				"size": {
					"x": 16,
					"y": 16
				},
				"dir": "SOUTH",
				"name": "revisitTele",
				"gfxType": "AR",
				"map": "arid-dng.second.f0.entrance",
				"marker": "entrance",
				"teleportLabel": {
					"en_US": "To \\c[3]Vermillion Tower\\c[0]"
				},
				"longTeleCond": true,
				"spawnCondition": "tmp.revisitTele"
			}		
		}
	},{
		"type": "ADD_ARRAY_ELEMENT",
		"content":
		{
			"type": "Marker",
			"x": 483,
			"y": 196,
			"level": 1,
			"settings": {
				"size": {
					"x": 16,
					"y": 16
				},
				"dir": "SOUTH",
				"name": "revisitTeleMarker",
				"spawnCondition": "true"
			}		
		}
	},{
		"type": "ADD_ARRAY_ELEMENT",
		"content":
		{
			"type": "EventTrigger",
			"x": 752,
			"y": 856,
			"level": 1,
			"settings": {
				"size": {
					"x": 16,
					"y": 16
				},
				"event": [{
						"type": "CHANGE_VAR_BOOL",
						"changeType": "set",
						"value": true,
						"varName": "g.vermillionTowerIntroNew"
					},{
						"type": "IF",
						"condition": "reset-arid-dng",
						"thenStep":[{
							"changeType": "set",
							"type": "CHANGE_VAR_BOOL",
							"varName": "tmp.revisitTele",
							"value": true
						}]
					}
				],
				"name": "dungeonReplay",
				"eventType": "PARALLEL",
				"startCondition": "true",
				"endCondition": "false",
				"triggerType": "ONCE_PER_ENTRY"
			}
		}
	},{
		"type": "ADD_ARRAY_ELEMENT",
		"content":
		{
			"type": "EventTrigger",
			"x": 752,
			"y": 856,
			"level": 1,
			"settings": {
				"size": {
					"x": 16,
					"y": 16
				},
				"event": [
					{
						"type": "CHANGE_VAR_BOOL",
						"changeType": "set",
						"value": false,
						"varName": "tmp.dungeonReplayStart"
					},{
						"entity": {
							"player": true
						},
						"action": [{
								"face": "SOUTH_EAST",
								"rotate": true,
								"rotateSpeed": 2,
								"type": "SET_FACE"
							}
						],
						"type": "DO_ACTION",
						"wait": false,
						"keepState": true
					}, {
						"type": "IF",
						"condition": "tmp.revisitTele",
						"thenStep": [
							{
								"type": "CHANGE_VAR_BOOL",
								"changeType": "set",
								"value": false,
								"varName": "tmp.revisitTele"
							},{
								"type": "WAIT",
								"time": 0.55
							},{
								"type": "CHANGE_VAR_BOOL",
								"changeType": "set",
								"value": true,
								"varName": "tmp.revisitTele"
							}
						]
					}, {
						"type": "CHANGE_VAR_BOOL",
						"changeType": "set",
						"value": true,
						"varName": "tmp.revisitTele"
					}, {
						"type": "WAIT",
						"time": 0.7
					}, {
						"type": "DUNGEON_REPLAY",
						"dungeon": "arid-dng"
					}
				],
				"name": "dungeonReplayStart",
				"eventType": "CUTSCENE",
				"startCondition": "tmp.dungeonReplayStart",
				"endCondition": "false",
				"triggerType": "ALWAYS"
			}
		}
	},{
		"type": "ADD_ARRAY_ELEMENT",
		"content":
		{
			"type": "EventTrigger",
			"x": 752,
			"y": 856,
			"level": 1,
			"settings": {
				"size": {
					"x": 16,
					"y": 16
				},
				"event": [{
						"type": "CHANGE_VAR_BOOL",
						"changeType": "set",
						"value": false,
						"varName": "g.vermillionTowerReturnNew"
					}, {
						"value": "NONE",
						"type": "SET_MOBILITY_BLOCK"
					},{
						"entity": {
							"player": true
						},
						"action": [{
								"newPos": {
									"x": 500,
									"y": 220,
									"lvl": {
										"level": "1",
										"offset": 280
									}
								},
								"type": "SET_POS"
							}, {
								"face": "SOUTH",
								"rotate": true,
								"rotateSpeed": 3,
								"type": "SET_FACE"
							}, {
								"value": 20,
								"type": "SET_FLOAT_HEIGHT"
							}, {
								"value": 0,
								"type": "SET_Z_VEL"
							}, {
								"variance": 4,
								"accel": 1,
								"speed": 100,
								"type": "SET_FLOAT_PARAMS"
							}, {
								"type": "SET_ZOOM_BLUR",
								"zoomType": "LIGHT",
								"fadeIn": 0.1,
								"duration": 3.0,
								"fadeOut": 2.0
							}, {
								"entity": {
									"player": true
								},
								"duration": -1,
								"align": "BOTTOM",
								"group": "",
								"wait": false,
								"waitSkip": 0,
								"type": "SHOW_EFFECT",
								"effect": {
									"sheet": "scene.designer",
									"name": "playerFloat"
								},
								"offset": {
									"x": 0,
									"y": 0,
									"z": 0
								}
							}, {
								"type": "WAIT",
								"time": 4
							}
						],
						"repeating": false,
						"wait": true,
						"keepState": true,
						"immediately": false,
						"type": "DO_ACTION"
					}, {
						"entity": {
							"player": true
						},
						"type": "CLEAR_EFFECTS"
					},{
						"entity": {
							"player": true
						},
						"action": [{
								"value": 0,
								"type": "SET_FLOAT_HEIGHT"
							}, {
								"type": "WAIT_UNTIL_ON_GROUND"
							}, {
								"wait": false,
								"type": "SHOW_EXTERN_ANIM",
								"anim": {
									"sheet": "player-poses",
									"name": "landOnGround"
								}
							}, {
								"type": "WAIT",
								"time": 0.5
							}, {
								"type": "CLEAR_ANIMATION"
							}, {
								"wait": true,
								"viaWalkConfig": false,
								"type": "SHOW_ANIMATION",
								"anim": "preIdle"
							}
						],
						"repeating": false,
						"wait": true,
						"keepState": true,
						"immediately": false,
						"type": "DO_ACTION"
					}
				],
				"name": "dungeonReplayReturn",
				"eventType": "CUTSCENE",
				"startCondition": "g.vermillionTowerReturnNew",
				"endCondition": "false",
				"triggerType": "ALWAYS"
			}
		}
	},{
		"type": "IMPORT",
		"src": "data/maps/dungeon-revisit.json"
	},{
		"type": "EXIT"
}]